









<!doctype html>
<html class="min-height-full">
  <head>
    <meta charset="utf-8">
    <title>Setting up React.js component testing for create-react-app with jest and enzyme</title>
    <meta name="description" content="Testing code has become a integral part of any programs life cycle and any developer worth their salt is creating meaningful tests for the code their writing.  Some even prefer to start with writing the tests before the code in what is referred to ask Test Driven Development and has the advantage..." />
    <meta property="og:title" content="Michael Gaudreau" />
    <meta property="og:image" content="https://avatars2.githubusercontent.com/u/54196703?v=4" />
    <meta property="og:description" content="Testing code has become a integral part of any programs life cycle and any developer worth their salt is creating meaningful tests for the code their writing.  Some even prefer to start with writing the tests before the code in what is referred to ask Test Driven Development and has the advantage..." />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="/assets/styles.css" rel="stylesheet" type="text/css">
  </head>
  <body class="bg-white min-height-full" style="background-color: #2f363d !important">





  <div class="d-md-flex min-height-full ">
    <div class="flex-self-stretch bg-gray-dark col-md-5 col-lg-4 col-xl-3 px-4 px-md-6 px-lg-7 py-6">
      

<img src="https://avatars2.githubusercontent.com/u/54196703?v=4" class="circle mb-3" style="max-width: 150px;">
<h1 class="text-white mb-2 lh-condensed">Michael Gaudreau</h1>
<p class="mb-3 f4 text-white">
  Staples Team Supervisor/Software Engineering Graduate of @flatiron-school
</p>


  <div class="f4 mb-6">
    
      <div class="d-flex flex-items-center mb-3">
        <svg height="20" class="octicon octicon-mark-github mr-2 v-align-middle" fill="#ffffff" aria-label="GitHub" viewBox="0 0 16 16" version="1.1" width="20" role="img"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
        <a href="https://github.com/mikeg1440" class="text-white">
          @mikeg1440
        </a>
      </div>
    
    
    
      <div class="d-flex flex-items-center mb-3 text-white">
        <svg height="20" class="octicon octicon-location mr-2 v-align-middle" fill="#ffffff" aria-label="Location" viewBox="0 0 12 16" version="1.1" width="15" role="img"><path fill-rule="evenodd" d="M6 0C2.69 0 0 2.5 0 5.5 0 10.02 6 16 6 16s6-5.98 6-10.5C12 2.5 9.31 0 6 0zm0 14.55C4.14 12.52 1 8.44 1 5.5 1 3.02 3.25 1 6 1c1.34 0 2.61.48 3.56 1.36.92.86 1.44 1.97 1.44 3.14 0 2.94-3.14 7.02-5 9.05zM8 5.5c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"/></svg>
        Hartford, CT
      </div>
    
    
    
  </div>


    </div>

    <div class="col-md-7 col-lg-8 col-xl-9 px-4 py-6 px-lg-7 border-top border-md-top-0 bg-gray-light" style="background-color: #2f363d !important">
      <div class="mx-auto" style="max-width: 900px;">
        <div class="f4 text-white mb-6">
          <div class="f4 text-white">
            <p class="f5"><a href="http://localhost:4000/" class="d-flex flex-items-center text-white"><svg height="16" class="octicon octicon-chevron-left mr-2 v-align-middle" fill="#ffffff" aria-label="Home" viewBox="0 0 8 16" version="1.1" width="8" role="img"><path fill-rule="evenodd" d="M5.5 3L7 4.5 3.25 8 7 11.5 5.5 13l-5-5 5-5z"/></svg>Home</a></p>
            <h1 class="f00-light lh-condensed">Setting up React.js component testing for create-react-app with jest and enzyme</h1>
            <p class="text-white mb-5">Published Mar 22, 2020</p>
            
  
  <div class="article">
    <p><img class="mx-auto" style="width: 100%" src="https://ned-alyona.github.io/presentations/react-components-testing/pictures/cover.png" alt="Jest, React and Enzyme logos" /></p>

<p>Testing code has become a integral part of any programs life cycle and any developer worth their salt is creating meaningful tests for the code their writing.  Some even prefer to start with writing the tests before the code in what is referred to ask Test Driven Development and has the advantage of defining what it is you want that specific piece of code to do and has long lasting benefits as you build larger and more complex applications.</p>

<p>This post will be looking at setting up tests for program created with <code class="highlighter-rouge">create-react-app</code> and will be using the default test framework <a href="https://jestjs.io/">Jest</a> that is generated default with <code class="highlighter-rouge">create-react-app</code> and adding the <a href="https://github.com/enzymejs/enzyme">Enzyme</a> framework.  It should be noted that Jest and Enzyme are specifically designed to test react apps Jest can also be used to test any other JavaScript application while Enzyme is a test framework for only React.  If you don’t already have it installed you can run <code class="highlighter-rouge">npm i -g create-react-app</code> to install the package globally, then you can generate the boilerplate app files with <code class="highlighter-rouge">create-react-app react-testing</code> where in this example <code class="highlighter-rouge">react-testing</code> is the name of the app we are creating.  After running that command you will end up with the following file structure.</p>

<p><img src="https://i.imgur.com/1XZmSdM.png" alt="Screenshot of file structure generated with create-react-app" /></p>

<p>As you can see we already have a few test related files created for us, the <code class="highlighter-rouge">App.test.js</code> and <code class="highlighter-rouge">setupTests.js</code> as well as some configuration set up in the <code class="highlighter-rouge">package.json</code> file.  You should be aware that if you decide to use a test framework other than jest like <a href="https://ci.testling.com/guide/tape">tape</a>, <a href="https://mochajs.org/">mocha</a> or <a href="https://jasmine.github.io/">jasmine</a> you would have to modify the <code class="highlighter-rouge">package.json</code> file.</p>

<p>The <code class="highlighter-rouge">setupTests.js</code> file come preconfigured for jest and looks like this.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// # src/setupTests.js

// jest-dom adds custom jest matchers for asserting on DOM nodes.
// allows you to do things like:
// expect(element).toHaveTextContent(/react/i)
// learn more: https://github.com/testing-library/jest-dom
import '@testing-library/jest-dom/extend-expect';
</code></pre></div></div>

<p>And <code class="highlighter-rouge">create-react-app</code> has also generously provided a test file for the <code class="highlighter-rouge">App</code> component with a single test that just makes sure that it renders the ‘learn react’ link.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// # src/app.test.js

import React from 'react';
import { render } from '@testing-library/react';
import App from './App';

test('renders learn react link', () =&gt; {
  const { getByText } = render(&lt;App /&gt;);
  const linkElement = getByText(/learn react/i);
  expect(linkElement).toBeInTheDocument();
});
</code></pre></div></div>

<p>And we can check to make sure everything with jest it working properly by running that test with <code class="highlighter-rouge">npm test</code> which should give you this screen showing that all 1 tests passed.
<img src="https://i.imgur.com/VnWDUaz.png" alt="Screenshot of initial test output" /></p>

<p>Next we add a few packages to get Enzyme working by running <code class="highlighter-rouge">npm i --save-dev enzyme enzyme-adapter-react-16</code>.  Then we need to modify the <code class="highlighter-rouge">src/setupTests.js</code> file to include and configure the newly added Enzyme packages.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// # src/setupTests.js

// jest-dom adds custom jest matchers for asserting on DOM nodes.
// allows you to do things like:
// expect(element).toHaveTextContent(/react/i)
// learn more: https://github.com/testing-library/jest-dom
import '@testing-library/jest-dom/extend-expect';

import { configure } from 'enzyme';
import Adapter from 'enzyme-adapter-react-16';
configure({ adapter: new Adapter() });
</code></pre></div></div>

<p>Now we can add new tests that use Enzyme functions like shallow rendering to test components.  We just need to import the proper test functions which will usually be similar to this.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import React from 'react';
import { render } from '@testing-library/react';
import { shallow } from 'enzyme';
</code></pre></div></div>

<p>Then we add tests with this format</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>describe('App Component', () =&gt; {

  it('renders without crashing', () =&gt; {
    // code to for test here
  })

})
</code></pre></div></div>

<p>So for example if we wanted to make sure that the App component renders the React logo properly we could modify our <code class="highlighter-rouge">src/App.test.js</code> file to look like this.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import React from 'react';
import { render } from '@testing-library/react';
import { shallow } from 'enzyme';
import logo from './logo.svg';
import App from './App';

test('renders learn react link', () =&gt; {
  const { getByText } = render(&lt;App /&gt;);
  const linkElement = getByText(/learn react/i);
  expect(linkElement).toBeInTheDocument();
});

it('renders the react logo image', () =&gt; {
  const wrapper = shallow(&lt;App /&gt;);
  const reactLogo = &lt;img src={logo} className="App-logo" alt="logo" /&gt;
  expect(wrapper.contains(reactLogo)).toBe(true)
});
</code></pre></div></div>

<p>Just follow the naming convention for test files by creating a file with the component name plus <code class="highlighter-rouge">.test.js</code>, so a test file for a new component called <code class="highlighter-rouge">Counter.js</code> would be <code class="highlighter-rouge">Counter.test.js</code>.</p>

<p>And that’s all you need to get testing your components in your app, I will be adding another post in the future to get full DOM rendering up and running for tests by adding <a href="https://sinonjs.org/">Sinon</a> and <a href="https://www.chaijs.com/">Chai</a></p>

  </div>

          </div>
        </div>
      </div>
    </div>
  </div>


  </body>
</html>

