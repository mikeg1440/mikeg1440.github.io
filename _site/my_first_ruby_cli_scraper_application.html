









<!doctype html>
<html class="min-height-full">
  <head>
    <meta charset="utf-8">
    <title>My First Ruby CLI Scraper Application</title>
    <meta name="description" content="I’m currently at the end of my fourth week at Flatiron Coding School and the project for this week was to create a CLI Data Gem as a portfolio project.  I ended creating two different apps but only because I wanted to make something a little bit more useful after finishing most of the first progr..." />
    <meta property="og:title" content="Michael Gaudreau" />
    <meta property="og:image" content="https://avatars2.githubusercontent.com/u/54196703?v=4" />
    <meta property="og:description" content="I’m currently at the end of my fourth week at Flatiron Coding School and the project for this week was to create a CLI Data Gem as a portfolio project.  I ended creating two different apps but only because I wanted to make something a little bit more useful after finishing most of the first progr..." />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="/assets/styles.css" rel="stylesheet" type="text/css">
  </head>
  <body class="bg-white min-height-full" style="background-color: #2f363d !important">





  <div class="d-md-flex min-height-full ">
    <div class="flex-self-stretch bg-gray-dark col-md-5 col-lg-4 col-xl-3 px-4 px-md-6 px-lg-7 py-6">
      

<img src="https://avatars2.githubusercontent.com/u/54196703?v=4" class="circle mb-3" style="max-width: 150px;">
<h1 class="text-white mb-2 lh-condensed">Michael Gaudreau</h1>
<p class="mb-3 f4 text-white">
  Staples Team Supervisor/Software Engineering Student
at @flatiron-school
</p>


  <div class="f4 mb-6">
    
      <div class="d-flex flex-items-center mb-3">
        <svg height="20" class="octicon octicon-mark-github mr-2 v-align-middle" fill="#ffffff" aria-label="GitHub" viewBox="0 0 16 16" version="1.1" width="20" role="img"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
        <a href="https://github.com/mikeg1440" class="text-white">
          @mikeg1440
        </a>
      </div>
    
    
    
      <div class="d-flex flex-items-center mb-3 text-white">
        <svg height="20" class="octicon octicon-location mr-2 v-align-middle" fill="#ffffff" aria-label="Location" viewBox="0 0 12 16" version="1.1" width="15" role="img"><path fill-rule="evenodd" d="M6 0C2.69 0 0 2.5 0 5.5 0 10.02 6 16 6 16s6-5.98 6-10.5C12 2.5 9.31 0 6 0zm0 14.55C4.14 12.52 1 8.44 1 5.5 1 3.02 3.25 1 6 1c1.34 0 2.61.48 3.56 1.36.92.86 1.44 1.97 1.44 3.14 0 2.94-3.14 7.02-5 9.05zM8 5.5c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"/></svg>
        127.0.0.1
      </div>
    
    
    
  </div>


    </div>

    <div class="col-md-7 col-lg-8 col-xl-9 px-4 py-6 px-lg-7 border-top border-md-top-0 bg-gray-light" style="background-color: #2f363d !important">
      <div class="mx-auto" style="max-width: 900px;">
        <div class="f4 text-white mb-6">
          <div class="f4 text-white">
            <p class="f5"><a href="http://localhost:4000/" class="d-flex flex-items-center text-white"><svg height="16" class="octicon octicon-chevron-left mr-2 v-align-middle" fill="#ffffff" aria-label="Home" viewBox="0 0 8 16" version="1.1" width="8" role="img"><path fill-rule="evenodd" d="M5.5 3L7 4.5 3.25 8 7 11.5 5.5 13l-5-5 5-5z"/></svg>Home</a></p>
            <h1 class="f00-light lh-condensed">My First Ruby CLI Scraper Application</h1>
            <p class="text-white mb-5">Published Oct 06, 2019</p>
            
  
  <div class="article">
    <p>I’m currently at the end of my fourth week at Flatiron Coding School and the project for this week was to create a CLI Data Gem as a portfolio project.  I ended creating two different apps but only because I wanted to make something a little bit more useful after finishing most of the first program.  This is a short walk-through of what I did to start the application, hopeful you can pick something new up or least learn from my frustrations.
<img src="https://i.ibb.co/N6v8ffq/freelancer-finder-menu.png" alt="FreelancerFinder Menu" />
This is the menu of the application I created last but I want to go through the first application I coded because I think I can point out somethings that others might find useful that I wish I had thought of.  I will be adding to this post over time so it may be incomplete at the time of reading but I wanted to get some useful info out there that I will be able to refer back to myself.</p>

<h2 id="general-requirements">General Requirements</h2>
<ul>
  <li>Provide a CLI interface</li>
  <li>Provide data from a site on the internet</li>
  <li>Data that goes one level deep ( user must be able to choose something and get more details about it)</li>
  <li>Good Object Oriented Design</li>
</ul>

<h2 id="specific-requirements">Specific Requirements</h2>
<ul>
  <li>A README.md file with the following
    <ul>
      <li>Short Description</li>
      <li>Install Instructions</li>
      <li>Contributors Guide</li>
      <li>Link to License for the code</li>
    </ul>
  </li>
  <li>CLI Essentials
    <ul>
      <li>CLI for interfacing with application</li>
      <li>Pulls data from a external source</li>
      <li>Has both list and detail views</li>
      <li>Go one level deep</li>
      <li>Follow DRY(Dont Repeat Yourself) principle</li>
    </ul>
  </li>
</ul>

<h3 id="planning">Planning</h3>

<p>This is were I made my mistake, I wanted to get started coding so I just got started with the first halfway decent idea I had.  The idea was to use the site <a href="https://10times.com">https://10times.com</a> which displays tech expo events around the world and allows you to click a event and see the details of it.  I thought it was perfect because it was somewhat programming related that I might use once and a while.  So I started out by creating a outline for the program and came up with four classes that I would need.  A CLI class to interact with the user, a Scraper class to scrape the data, a Event class to hold the events and I ended up adding a Location class after starting to code so that it would be easier to find events by their location.</p>

<h3 id="creating-the-application-structure">Creating the application structure</h3>

<p>Next I started by creating a new repo on Github and then getting the general structure I would be using from Bundler by running this command <code class="highlighter-rouge">bundle gem event_finder</code>.  It creates the files/folders <a href="https://drive.google.com/open?id=1DJmMK86bSK0-XoYZ2SJDZg33hjgscrMi">shown here</a>.</p>

<p><img src="https://i.ibb.co/bBFMKyB/bundle-gem-structure.png" alt="Default File Structure" /></p>

<h3 id="initialize-git">Initialize git</h3>

<p><code class="highlighter-rouge">git init</code></p>

<p>This will initialize a git folder and files</p>

<p><code class="highlighter-rouge">git remote add origin https://github.com/git-repo-her</code></p>

<p>This will add the repo you created as the remote origin for the code to push to</p>

<h3 id="create-the-files-we-will-need">Create the files we will need</h3>

<p>Next I created my class files in <code class="highlighter-rouge">/lib</code> and executable file in the <code class="highlighter-rouge">/bin</code> directory</p>

<p><code class="highlighter-rouge">touch lib/event_finder/cli.rb</code></p>

<p><code class="highlighter-rouge">touch lib/event_finder/event.rb</code></p>

<p><code class="highlighter-rouge">touch lib/event_finder/scraper.rb</code></p>

<p><code class="highlighter-rouge">touch lib/event_finder/location.rb</code></p>

<p><code class="highlighter-rouge">touch bin/event_finder</code></p>

<p>Then make out executable actually executable and add a few lines</p>

<p><code class="highlighter-rouge">chmod +x bin/event_finder</code></p>

<p>And inside of <code class="highlighter-rouge">bin/event_finder</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">#!/usr/bin/env ruby</span>

<span class="nb">require_relative</span> <span class="err">'</span><span class="o">..</span><span class="sr">/lib/e</span><span class="n">vent_finder</span><span class="p">.</span><span class="nf">rb</span>

<span class="no">EventFinder</span><span class="o">::</span><span class="no">CLI</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">call</span>
</code></pre></div></div>

<h3 id="set-up-our-environment-file">Set up our environment file</h3>

<p>Next we need to include our class files in the environment file <code class="highlighter-rouge">lib/event_finder.rb</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>require 'bundler'
require 'open-uri'
Bundler.require(:default, :developement)

module EventFinder
  require_relative '../lib/event_finder/cli'
  require_relative '../lib/event_finder/event'
  require_relative '../lib/event_finder/scraper'
  require_relative '../lib/event_finder/location'
end
</code></pre></div></div>

<h3 id="add-our-dependencies">Add our dependencies</h3>

<p>Because we are using Bundler we have a .gemspec file that we need to fill with some information and include our dependencies in as well.  Anything that has a TODO or a FIX will need to be edited to run our program at all so go ahead and fill out all the relevant information.  Next we add the dependencies at the end of the file I added these.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>spec.add_development_dependency "pry"

spec.add_dependency "nokogiri"
</code></pre></div></div>

<p>At this point we should be able to run <code class="highlighter-rouge">bundle install</code> to install the correct gems and allow us to run the executable.  If we comment out the <code class="highlighter-rouge">EventFinder::CLI.new.call</code> line and put a simple <code class="highlighter-rouge">puts "hello world</code> in our <code class="highlighter-rouge">lib/event_finder/cli.rb</code> file then run <code class="highlighter-rouge">./bin/event_finder</code> we should see “hello world” in the terminal output.</p>

<h3 id="dont-forget-to-git-commit">Don’t forget to git commit</h3>

<p>Version control is a hugely helpful tool when used correctly while coding but is important that you do a few things.  The first thing is commit often, any time you add a new feature, method, or fix you should commit.  Also make sure to add a message that makes sense for what your changes are, so if you can read your git log like this “if you apply this change(commit) it will do this”.  I like to only use a few category words to start mine off with so if I add a new feature my commit message looks something like this ‘Feat find specific instance by id’ or for a fix ‘Fix error thrown when scraping page X’.  Also I’m trying to get in the habit of creating branches for when I start on implementing a big change to the program so that I can fall back to the last good working version easily if I end up needing to.</p>

<h3 id="planning-class-functionality">Planning class functionality</h3>

<p>This is where I could have taken a little bit more time at the start and it would have saved me allot of work refactoring and DRYing out the code towards the end.  I think the best way to do this is just create the methods that you think would make the most sense for what your trying to do keeping in mind the <a href="http://wall-skills.com/2013/solid-principles-for-maintainable-oo-code/">SOLID</a> principles as well as DRY(Don’t Repeat Yourself).</p>

<h3 id="creating-the-classes">Creating the classes</h3>

<p>I started out by just creating the methods that I wanted to be able to call and how I wanted the flow of the program
to go from start to finish as I imagined the finished program.  I did this for each class, creating methods like
<code class="highlighter-rouge">show_menu</code> and <code class="highlighter-rouge">scrape_events</code>.  Then I started with the smaller classes and thought of all the attributes the class could have and created attribute accessors for them and created the base initialize methods.  From here I coded the starting logic of theCLI class and pry’ed into the the program after I scraped the document and while looking at the sites HTML using Chrome’s Dev Tools I found the CSS selectors for each of the pieces of info I wanted from the main page.  Using the information I created a instance of event class for each event scraped.</p>

<h3 id="tldr">TL;DR</h3>
<p>The gist of this article is just how to get started on a ruby CLI gem using Bundler and I will be adding more to the post as I have time.  Next up we will be looking at starting to code our classes as well as then what makes a good website to scrape data from and then how to go about scraping it.</p>

  </div>

          </div>
        </div>
      </div>
    </div>
  </div>


  </body>
</html>

